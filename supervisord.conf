[supervisord]
nodaemon=true

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[program:xvfb]
command=Xvfb $DISPLAY -screen 0 1920x1480x24+32 -ac -r -cc 4 -accessx -xinerama +extension Composite -extension RANDR +extension GLX
priority=10
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/xvfb.err.log
stdout_logfile=/var/log/supervisor/xvfb.out.log

[program:x11vnc]
command=x11vnc -rfbport $VNC_PORT -display $DISPLAY -rfbauth /tmp/.vnc/passwd -forever -shared
priority=20
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/x11vnc.err.log
stdout_logfile=/var/log/supervisor/x11vnc.out.log

[program:chrome]
command=/usr/bin/google-chrome --no-sandbox --no-first-run --disable-dev-shm-usage --disable-dbus --no-default-browser-check --user-data-dir=$USER_DATA_DIR --remote-debugging-port=$DEBUG_PORT --enable-net-benchmarking
priority=30
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/chrome.err.log
stdout_logfile=/var/log/supervisor/chrome.out.log

[program:socat]
command=/usr/bin/socat -v -d tcp-listen:$DEBUG_PORT,reuseaddr,fork tcp:localhost:$DEBUG_PORT
priority=40
autorestart=true
startretries=3
stderr_logfile=/var/log/supervisor/socat.err.log
stdout_logfile=/var/log/supervisor/socat.out.log
